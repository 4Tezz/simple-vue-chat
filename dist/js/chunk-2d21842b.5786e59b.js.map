{"version":3,"sources":["webpack:///./src/app/shared/views/Registration.vue","webpack:///./src/app/shared/use/registration-form.js","webpack:///./src/app/shared/views/Registration.vue?a4a8"],"names":["class","for","registered","emailError","type","id","email","emailBlur","passError","passBlur","password","aliasError","aliasBlur","alias","disabled","isSubmitting","ManyAttempts","to","registeredForm","router","useRouter","store","useStore","useForm","handleSubmit","submitCount","useField","yup","trim","required","value","errorMessage","handleBlur","min","computed","watch","val","setTimeout","dispatch","push","setup","render","__scopeId"],"mappings":"oNACOA,MAAM,yB,GACJA,MAAM,oB,EACT,eAAoB,UAAhB,eAAW,G,EAIX,eAAoC,SAA7BC,IAAI,SAAQ,aAAS,G,YAM5B,eAA+C,SAAxCA,IAAI,YAAW,qBAAiB,G,YAMvC,eAAkD,SAA3CA,IAAI,YAAW,wBAAoB,G,2BAO3C,2C,iBAEyD,S,4GA3BhE,eA8BM,MA9BN,EA8BM,CA7BJ,eA4BM,MA5BN,EA4BM,CA3BJ,EACA,eAqBO,QArBA,SAAM,8CAAU,EAAAC,YAAA,EAAAA,WAAA,qBAAU,e,CAE/B,eAIM,OAJAF,MAAK,gCAAsC,EAAAG,c,CAC/C,E,eACA,eAAkE,SAA3DC,KAAK,QAAQC,GAAG,Q,qDAAiB,EAAAC,MAAK,IAAG,OAAI,8BAAE,EAAAC,WAAA,EAAAA,UAAA,sB,mBAAd,EAAAD,SAC3B,EAAAH,Y,iBAAb,eAAiD,yBAArB,EAAAA,YAAU,I,0BAGxC,eAIM,OAJAH,MAAK,yBAA8B,EAAAQ,a,CACvC,E,eACA,eAAsE,SAA/DJ,KAAK,OAAOC,GAAG,WAAY,OAAI,8BAAE,EAAAI,UAAA,EAAAA,SAAA,qB,qDAAmB,EAAAC,SAAQ,K,mBAAR,EAAAA,YAC9C,EAAAF,W,iBAAb,eAA+C,yBAApB,EAAAA,WAAS,I,0BAGtC,eAIM,OAJAR,MAAK,yBAA4B,EAAAW,c,CACrC,E,eACA,eAAoE,SAA7DP,KAAK,OAAOC,GAAG,WAAY,OAAI,8BAAE,EAAAO,WAAA,EAAAA,UAAA,qB,qDAAoB,EAAAC,MAAK,K,mBAAL,EAAAA,SAC/C,EAAAF,Y,iBAAb,eAAiD,yBAArB,EAAAA,YAAU,I,0BAGxC,eAAkG,UAA1FX,MAAM,aAAaI,KAAK,SAAUU,SAAU,EAAAC,cAAgB,EAAAC,cAAc,UAAO,iB,IAE3F,eAGI,U,EADF,eAA6E,GAA/DC,GAAI,uBAAyBjB,MAAM,U,YAAS,iBAAK,C,+HCtBhE,SAASkB,IACZ,IAAMC,EAASC,iBACTC,EAAQC,iBACd,EAAoDC,iBAA5CC,EAAR,EAAQA,aAAcT,EAAtB,EAAsBA,aAAcU,EAApC,EAAoCA,YACpC,EAA0EC,eAAS,QAASC,SAAaC,OAAOC,SAAS,4BAA4BvB,MAAM,4BAA5IA,EAAf,EAAQwB,MAA4B3B,EAApC,EAAsB4B,aAAsCxB,EAA5D,EAAgDyB,WAChD,EAA2EN,eAAS,WAAYC,SAAaC,OAAOC,SAAS,6BAA6BI,IAAI,EAAG,+CAAlJvB,EAAf,EAAQoB,MAA+BtB,EAAvC,EAAyBuB,aAAqCtB,EAA9D,EAAkDuB,WAClD,EAA0EN,eAAS,QAASC,SAAaE,SAAS,8BAAnGhB,EAAf,EAAQiB,MAA4BnB,EAApC,EAAsBoB,aAAsCnB,EAA5D,EAAgDoB,WAG1ChB,EAAekB,gBAAS,kBAAMT,EAAYK,OAAS,KAEzDK,eAAMnB,GAAc,SAACoB,GACbA,GACAC,YAAW,WACPZ,EAAYK,MAAQ,IACrB,QAIX,IAAM5B,EAAasB,EAAY,yDAAE,WAAOY,GAAP,iGACxBf,EAAMiB,SAAS,wBAAwBF,GADf,OAE9BjB,EAAOoB,KAAK,SAFkB,2CAAF,uDAI/B,MAAO,CAAE3B,YAAWD,aAAYE,QAAOJ,WAAUD,YAAWE,WAAUR,aAAYa,eAAcC,eAAcV,QAAOH,aAAYI,aDOtH,OACbiC,MADa,WAEX,yBAAWtB,OEnCf,EAAOuB,OAASA,EAChB,EAAOC,UAAY,kBAEJ","file":"js/chunk-2d21842b.5786e59b.js","sourcesContent":["<template>\r\n  <div class=\"container center pt-5\">\r\n    <div class=\"form-card center\">\r\n      <h1>Регистрация</h1>\r\n      <form @submit.prevent=\"registered\">\r\n\r\n        <div :class=\"['form-control', 'pt-2' , {invalid: emailError}]\">\r\n          <label for=\"email\">Ваш email</label>\r\n          <input type=\"email\" id=\"email\" v-model=\"email\" @blur=\"emailBlur\"/>\r\n          <small v-if=\"emailError\"> {{emailError}} </small>\r\n        </div>\r\n\r\n        <div :class=\"['form-control' , {invalid: passError}]\">\r\n          <label for=\"password\">Придумайте пароль</label>\r\n          <input type=\"text\" id=\"password\" @blur=\"passBlur\" v-model='password'/>\r\n          <small v-if=\"passError\"> {{passError}} </small>\r\n        </div>\r\n\r\n        <div :class=\"['form-control',{invalid: aliasError}]\">\r\n          <label for=\"nickname\">Придумайте псевдоним</label>\r\n          <input type=\"text\" id=\"nickname\" @blur=\"aliasBlur\" v-model=\"alias\"/>\r\n          <small v-if=\"aliasError\"> {{aliasError}} </small>\r\n        </div>\r\n\r\n        <button class=\"btn submit\" type=\"submit\" :disabled=\"isSubmitting || ManyAttempts\">Создать</button>\r\n      </form>\r\n      <p>\r\n        Если у вас уже есть аккаунт вы можете\r\n        <router-link :to=\"{name: 'auntification'}\" class=\"create\">войти</router-link>\r\n      </p>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {registeredForm} from './../use/registration-form.js'\r\nexport default {\r\n  setup() {\r\n    return {...registeredForm()}\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n</style>","import { computed, watch } from '@vue/runtime-core';\r\nimport * as yup from 'yup'\r\nimport { useForm, useField } from 'vee-validate'\r\nimport { useRouter } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\n\r\nexport function registeredForm() {\r\n    const router = useRouter()\r\n    const store = useStore()\r\n    const { handleSubmit, isSubmitting, submitCount } = useForm()\r\n    const { value: email, errorMessage: emailError, handleBlur: emailBlur } = useField('email', yup.string().trim().required('Пожалуйста введите email').email('Введите коректный email'))\r\n    const { value: password, errorMessage: passError, handleBlur: passBlur } = useField('password', yup.string().trim().required('Пожалуйста введите пароль').min(6, 'Пароль должен содержать минимум 6 символов'))\r\n    const { value: alias, errorMessage: aliasError, handleBlur: aliasBlur } = useField('alias', yup.string().required('Придумайте себе псевдоним'))\r\n\r\n\r\n    const ManyAttempts = computed(() => submitCount.value >= 3)\r\n\r\n    watch(ManyAttempts, (val) => {\r\n        if (val) {\r\n            setTimeout(() => {\r\n                submitCount.value = 0\r\n            }, 3 * 1000);\r\n        }\r\n    })\r\n\r\n    const registered = handleSubmit( async (val) => {\r\n       await store.dispatch('registr/createAccount',val)\r\n       router.push('/auth')\r\n    })\r\n    return { aliasBlur, aliasError, alias, passBlur, passError, password, registered, isSubmitting, ManyAttempts, email, emailError, emailBlur }\r\n}","import { render } from \"./Registration.vue?vue&type=template&id=2f733ff5&scoped=true\"\nimport script from \"./Registration.vue?vue&type=script&lang=js\"\nexport * from \"./Registration.vue?vue&type=script&lang=js\"\nscript.render = render\nscript.__scopeId = \"data-v-2f733ff5\"\n\nexport default script"],"sourceRoot":""}